<?php defined('BASEPATH') OR exit('No direct script access allowed'); ?><md-content class="mylayout-padding" ng-cloak>    <div layout="column">        <div ng-include="'includes/call_alerts'"></div>        <h3 class="heading-stylerespond">{{title}}</h3>        <div layout-gt-sm="row" layout-xs="column" layout-gt-xs="column" layout="row">            <md-input-container ng-show="user_role_code==HMADMIN" class="no-margin-padding-md-input" flex="20" flex-xs="100">                <md-select placeholder="Select Branch *" ng-model="completecall_search.branch_id" ng-change="SearchCompletedCalls()" aria-label="user_branch">                    <md-option ng-value="branch.BRANCH_ID" ng-repeat="branch in branchs">{{branch.BRANCH_NAME}}</md-option>                </md-select>            </md-input-container>        </div>        <div layout="row" layout-md="row" flex-gt-sm="row" layout-xs="column" class="widget-container">            <table class="md-api-table table table-bordered" fixed-header ng-cloak style="width:100%;margin-bottom: 5px;">                <thead>                <tr>                    <th>Equipment ID</th>                    <th>Eq. Name</th>                    <th>Location</th>                    <th>Raised By</th>                    <th>Complaint</th>                    <th>Dept</th>                    <th>Type </th>                    <th>Call Date</th>                    <th>Status</th>                    <th>Assigned</th>                    <th>Attend By</th>                    <th>On Hold By</th>                    <th>Completed By</th>                </tr>                </thead>                <tbody ng-if="cc_devices!=null">                <tr ng-repeat="cc_device in cc_devices">                    <td>{{(user_org == cc_device.ORG_ID) ? cc_device.EID : cc_device.ASSIGN_ID}}</td>                    <td>{{cc_device.eq_name}}</td>                    <td>{{cc_device.location}}</td>                    <td>{{cc_device.CALLER_UNAME}}</td>                    <td>{{cc_device.NATURE_OF_COMP}}</td>                    <td>{{cc_device.CALLER_DEPT}}</td>                    <td>{{cc_device.TYPE}}</td>                    <td>{{cc_device.CDATETIME+'000' | date:'dd-MM-yyyy hh:mm a'}}</td>                    <td>                        <div ng-if="cc_device.STATUS==ticket_sts[0]">{{ticket_sts1[0]}}</div>                        <div ng-elif="cc_device.STATUS==ticket_sts[1]">{{ticket_sts1[1]}}</div>                        <div ng-else="cc_device.STATUS==ticket_sts[2]">{{ticket_sts1[2]}}</div>                    </td>                    <td align="center"> <!-- Responded / Assigned To  -->                        <div ng-show="user_role_code!=HMADMIN" ng-if="cc_device.RESPONDED_DATE==null">                            <div ng-if="cc_device.ASSIGNED_TO==null && cc_device.ATTENDED_BY==null">                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,before_respond)" aria-label="Respond Button{{$index}}">                                    <md-tooltip md-direction="top">Respond Call</md-tooltip>                                    <ng-md-icon icon="call" style="fill:#0d7cff" size="24"></ng-md-icon>                                </md-button>                            </div>                            <div ng-elif="cc_device.ASSIGNED_TO==user_id">                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,before_respond)" aria-label="Respond Button{{$index}}">                                    <md-tooltip md-direction="top">Call Assigned To You</md-tooltip>                                    <ng-md-icon icon="call" style="fill:#009688" size="24"></ng-md-icon>                                </md-button>                            </div>                            <div ng-else>{{cc_device.ASSIGNED_ON}} / {{cc_device.ASSIGNED_TO_NAME}}</div>                        </div>                        <div ng-else>                            <!--<div ng-if="tc_device.ASSIGNED_TO==user_id">{{tc_device.ASSIGNED_TO_NAME}}</div>                            <div ng-elif="tc_device.RESPONDED_BY==user_id">{{tc_device.RESPONDED_BY_NAME}}</div>                            <div ng-elif="tc_device.ATTENDED_BY==user_id">{{tc_device.ATTENDEE_NAME}}</div>                            <div ng-elif="tc_device.ATTENDED_BY!=user_id">{{tc_device.RESPONDED_BY_NAME}}</div>-->                            <div>{{cc_device.RESPONDED_DATE | date:'dd-MM-yy'}} {{cc_device.RESPONDED_TIME}} / {{cc_device.RESPONDED_BY_NAME}}</div>                        </div>                    </td> <!-- End Responded / Assigned To -->                    <td align="center"> <!--Attend-->                        <div ng-if="cc_device.ASSIGNED_TO==Vendor">                            <div ng-show="user_role_code!=HMADMIN" ng-if="cc_device.ATTENDED_BY==null">                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,Vendor)" aria-label="Vendor Button{{$index}}">                                    <md-tooltip md-direction="top">Vendor Call</md-tooltip>                                    <ng-md-icon icon="call_split" style="fill:#ffa602" size="24"></ng-md-icon>                                </md-button>                            </div>                            <div ng-else>                                <span title="Vendor Call Attended by {{cc_device.ATTENDEE_NAME}}" style="color:#3957D8;text-transform:capitalize;">{{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}</span>                            </div>                        </div>                        <div ng-show="user_role_code!=HMADMIN" ng-elif="cc_device.RESPONDED_BY==user_id && cc_device.ASSIGNED_BY!=user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,after_respond)" aria-label="Attend Button{{$index}}">                                <md-tooltip md-direction="top">Attend Call</md-tooltip>                                <ng-md-icon icon="call_received" style="fill:#ffa602" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-show="user_role_code!=HMADMIN" ng-elif="cc_device.ASSIGNED_TO==user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,after_respond)" aria-label="Attend Button{{$index}}">                                <md-tooltip md-direction="top">Assigned by {{cc_device.ASSIGNED_BY_NAME}}</md-tooltip>                                <ng-md-icon icon="call_received" style="fill:#009688" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="cc_device.ASSIGNED_TO==user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE!=null">                            {{cc_device.ASSIGNED_ON}} / {{cc_device.ASSIGNED_TO_NAME}}                        </div>                        <div ng-elif="cc_device.ATTENDED_BY==user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE!=null">                            {{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}                        </div>                        <div ng-elif="(cc_device.ATTENDED_BY==user_id || cc_device.ASSIGNED_TO==user_id) && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Attend Button{{$index}}" ng-disabled="true" aria-label="Attend Button{{$index}}>                            <ng-md-icon icon="call_received" style="fill:#FFFFFF" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="cc_device.ASSIGNED_TO!=user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Attend Button{{$index}}" ng-disabled="true">                                <ng-md-icon icon="call_received" style="fill:#FFFFFF" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="(cc_device.ATTENDED_BY!=user_id || cc_device.ASSIGNED_TO==null) && cc_device.RESPONDED_DATE==null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Attend Button{{$index}}" ng-disabled="true">                                <ng-md-icon icon="call_received" style="fill:#FFFFFF" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="cc_device.ATTENDED_BY!=user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Attend Button{{$index}}" ng-disabled="true">                                <ng-md-icon icon="call_received" style="fill:#FFFFFF" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="cc_device.ATTENDED_BY!=user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE!=null">                            {{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}                        </div>                        <div ng-elif="cc_device.ASSIGNED_TO!=user_id && cc_device.RESPONDED_DATE!=null && cc_device.ATTENDED_DATE!=null">                            {{cc_device.ASSIGNED_ON}} / {{cc_device.ASSIGNED_TO_NAME}}                        </div>                    </td> <!--End Attend-->                    <td align="center"> <!-- Process Pending Status -->                        <div ng-if="cc_device.ATTENDED_BY==null">                            <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Pending Button{{$index}}" ng-disabled="true">                                <ng-md-icon icon="sms_failed" style="fill:#FFFFFF" size="24"></ng-md-icon>                            </md-button>                        </div>                        <div ng-elif="cc_device.ATTENDED_BY==user_id">                            <div ng-if="cc_device.ATTENDED_DATE!=null">                                <div ng-if="cc_device.JOBCOMPLETED_DATE==null && cc_device.PENDING_REASON!=null">                                    {{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}                                </div>                                <div ng-elif="cc_device.JOBCOMPLETED_DATE==null && cc_device.PENDING_REASON==null">                                    <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,make_pending_call)" aria-label="Pending Button{{$index}}">                                        <md-tooltip md-direction="top">Inprogress Call</md-tooltip>                                        <ng-md-icon icon="sms_failed" style="fill:#800" size="24"></ng-md-icon>                                    </md-button>                                </div>                                <div ng-else>                                    {{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}                                </div>                            </div>                            <div ng-else>                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Pending Button{{$index}}" ng-disabled="true">                                    <ng-md-icon icon="sms_failed" style="fill:#FFFFFF" size="24"></ng-md-icon>                                </md-button>                            </div>                        </div>                        <div ng-elif="cc_device.ATTENDED_BY!=user_id">                            <div ng-if="cc_device.ATTENDED_DATE!=null">                                <div ng-if="cc_device.JOBCOMPLETED_DATE==null && cc_device.PENDING_REASON!=null">                                    {{cc_device.ATTENDED_DATE | date:'dd-MM-yy'}} {{cc_device.ATTENDED_TIME}} / {{cc_device.ATTENDEE_NAME}}                                </div>                                <div ng-elif="cc_device.JOBCOMPLETED_DATE==null && cc_device.PENDING_REASON==null">                                    <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Pending Button{{$index}}" ng-disabled="true">                                        <ng-md-icon icon="sms_failed" style="fill:#FFFFFF" size="24"></ng-md-icon>                                    </md-button>                                </div>                            </div>                            <div ng-else>                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Pending Button{{$index}}" ng-disabled="true">                                    <ng-md-icon icon="sms_failed" style="fill:#FFFFFF" size="24"></ng-md-icon>                                </md-button>                            </div>                        </div>                    </td> <!-- End Process Pending Status -->                    <td align="center"><!--Complete - Status-->                        <div ng-if="cc_device.ATTENDED_BY==user_id">                            <div ng-if="cc_device.ATTENDED_DATE!=null">                                <div ng-if="cc_device.JOBCOMPLETED_DATE==null">                                    <md-button class="md-icon-button my-md-icon-button md-raised md-default" ng-click="RespondToCall($event,cc_device,complete_call)" aria-label="Completed Button{{$index}}">                                        <md-tooltip md-direction="top">Complete Call</md-tooltip>                                        <ng-md-icon icon="done_all" style="fill:green" size="24"></ng-md-icon>                                    </md-button>                                </div>                                <div ng-else>                                    {{cc_device.jobcomplete_date}} / {{cc_device.COMPLETED_BY}}                                </div>                            </div>                            <div ng-else>                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Completed Button{{$index}}" ng-disabled="true">                                    <ng-md-icon icon="done_all" style="fill:#FFFFFF" size="24"></ng-md-icon>                                </md-button>                            </div>                        </div>                        <div ng-elif="cc_device.ATTENDED_BY!=user_id">                            <div ng-if="cc_device.ATTENDED_DATE!=null">                                <div ng-if="cc_device.JOBCOMPLETED_DATE==null">                                    <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Completed Button{{$index}}" ng-disabled="true">                                        <ng-md-icon icon="done_all" style="fill:#FFFFFF" size="24"></ng-md-icon>                                    </md-button>                                </div>                                <div ng-else>                                    {{cc_device.jobcomplete_date}} / {{cc_device.COMPLETED_BY}}                                </div>                            </div>                            <div ng-else>                                <md-button class="md-icon-button my-md-icon-button md-raised md-default" aria-label="Completed Button{{$index}}" ng-disabled="true">                                    <ng-md-icon icon="done_all" style="fill:#FFFFFF" size="24"></ng-md-icon>                                </md-button>                            </div>                        </div>                    </td><!-- End Complete Status...-->                </tr>                </tbody>                <tbody ng-else>                <tr>                    <td colspan="13" style="text-align:center;width:100%;">No Calls Found...!</td>                </tr>                </tbody>            </table>        </div>        <div flex layout="row" class="marginb-10" ng-if="cc_devices!=null">            <div flex-xs="100" flex="20" layout-align="start start" flex layout="column">                <md-button class="md-icon-button md-primary md-raised" aria-label="Total">                    <md-tooltip md-direction="top">Total Records</md-tooltip>                    {{no_of_recs}}                </md-button>            </div>            <div flex="20" hide-xs hide-sm><!-- Space --></div>            <div flex-xs="100" flex="60" layout="column" layout-align="end end">                <cl-paging flex cl-pages="paging.total" , cl-steps="5" , cl-page-changed="SearchCompletedCalls(paging.current)" , cl-align="end end" , cl-current-page="paging.current"></cl-paging>            </div>        </div>    </div></md-content>